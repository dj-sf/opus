<!-- IT MAY BE POSSIBLE TO MAKE THESE FIELDS REFILL AFTER AN ERROR USING FLASH -->

<% if flash.has?(:message) %>
  <br>
  <% flash[:message].each do |message| %>
    <p style ='color: red'><em><%= message %></em></p>
  <% end %>
<% end %>

<h2 class='page_title'>Create New Book</h2>

<form class="text" action="/books" method="post">
  <label for="book_name">Book Name: </label><br>
  <input type="text" id='book_name' name="book[name]" placeholder='name'><br>
  <br>

  <label for="book_has_been_read">Finished reading this book? </label><br>
  <select class='text' name="book[has_been_read]" id='book_has_been_read'>
    <option value=0>No</option>
    <option value=1>Yes</option>
  </select>
  <br></br>

  <label for="book_author">Choose an existing author: </label><br>
  <select class ="text" id='book_author' name="book[author]" placeholder= 'select an author'>
    <option value="">- select an author -</option>
    <% @authors.each do |a| %>
      <option value="<%= a.name %>"><%= a.name %></option>
    <% end %>
  </select>
  <br></br>
  OR create a new author: <br>
  <input type="text" id='new_book_author' name="author[name]" placeholder='new author name'>
  <br></br>

  <label for="book_publisher">Choose an existing publisher: </label><br>
  <select name= "book[publisher]" id='book_publisher'>
    <option value="">- select a publisher -</option>
    <% @publishers.each do |p| %>
      <option value="<%= p.name %>"><%= p.name %></option>
    <% end %>
  </select>
  <br></br>

  OR create a new publisher: <br>
  <input type="text" name="publisher[name]" id= 'new_publisher_name' placeholder='new publisher name'>
  <br></br>

  <label for="book_year_published">Year Published: </label><br>
  <input type="text" id='book_year_published' name="book[year_published]" placeholder='year published'><br>
  <br>

  <label for="bookgenre">Choose an existing genre: </label><br>
  <% @genres.each do |g| %>
    <input type = 'checkbox' id='<%= g.id %>' name='book[genre_ids][]' value="<%= g.id %>"><%= g.name %></input> <br>
  <% end %>
  <br>
  AND/OR create a new genre:
  <input type="text" name="genre[name]" id= 'new_genre'>
  <!-- eventually make it so yo u can add up to 3 new genres at once. -->
  <br></br>


  <input type="submit" value="Create New Book">
</form>
<br>
or <a href="/books">Go Back</a>
